package com.mobile.signalFlags {		import flash.display.MovieClip;	import flash.events.*;	import flash.display.BitmapData;	import flash.display.Bitmap;	import flash.display.PixelSnapping;	import flash.geom.Matrix;	import flash.events.*;	public class shipFlip extends MovieClip {		private var cardFront:front;		private var cardBack:back;		private var slides:Array;		private var cardImage:Bitmap;		private var bmdTmp:BitmapData;		private var centerX,centerY:Number;		public function shipFlip(_bmd:BitmapData) {			// constructor code			cardFront=new front(1);			cardBack=new back(0);			slides = new Array(cardFront, cardBack);			bmdTmp = _bmd.clone();			addEventListener(Event.ADDED_TO_STAGE, init);			addEventListener("flipMe", clicked);		}				private function init(e:Event):void		{			centerX = stage.stageWidth/2;			centerY = stage.stageHeight/2;						var _scale = cardFront.card_container.width / bmdTmp.width;			cardImage = makeImage(bmdTmp, _scale);			cardFront.card_container.addChild(cardImage);			addSlides();		}				private function makeImage(_bmd:BitmapData, scale:Number):Bitmap		{			var matrix:Matrix = new Matrix();			matrix.scale(scale, scale);			var smallBMD:BitmapData = new BitmapData(_bmd.width * scale, _bmd.height * scale, true, 0x000000);			smallBMD.draw(_bmd, matrix, null, null, null, true);			var bitmap:Bitmap = new Bitmap(smallBMD, PixelSnapping.NEVER, true);			return bitmap;					}				private function addSlides():void		{			for (var i:Number = 0; i<slides.length;i++ )			{				addChildAt(slides[i],0);				slides[i].x = centerX;				slides[i].y = centerY;							}		}				private function clicked(e:Event):void		{			removeEventListener("flipMe", clicked);			trace("::SHIPFLIP::CLICKED");			for each (var f:flipper in slides )			{				(f == e.target as flipper) ? f.flipOff() : f.flipOn();							}						e.target.addEventListener("flipComplete", flipCompleteHandler);								}				private function flipCompleteHandler(e:Event):void		{			e.target.removeEventListener("flipComplete", flipCompleteHandler);			this.setChildIndex(cardFront, 0);			addEventListener("flipMe", clicked);					}	}	}